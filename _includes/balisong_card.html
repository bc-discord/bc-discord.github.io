{% assign bali = include.bali %}

{% if bali.end_year %}
  {% assign end_year = bali.end_year %}
{% elsif bali.start_year %}
  {% assign end_year = "Present" %}
{% else %}
  {% assign end_year = "XXXX" %}
{% endif %}

{% assign b_status = bali.availability | downcase %}

<div class="model-card" role="region" aria-label="Balisong model card">
  <header class="mc-head">
    <div class="mc-head-media">
      <img src="/assets/images/balisongs/{{ page.folder }}/{{ page.key }}/{{ bali.model_card_image }}" loading="lazy" decoding="async">
    </div>
    
    <div class="mc-head-text">
      <div class="mc-head-top-half">
        <div class="mc-name-year">
          <span class="mc-name">{{ bali.name }}</span>
          <p class="mc-maker-line">
            <span class="mc-maker">{{ bali.maker }}</span>
            <span class="mc-years">({{ bali.start_year | default: 'XXXX' }} - {{ end_year }})</span>
          </p>
        </div>
        <div class="mc-price-links">
          {% if bali.links %}
          <nav class="mc-links" aria-label="External links">
            {% for l in bali.links %}
              <a class="mc-link" href="{{ l.url | escape }}" rel="noopener">{{ l.name }}</a>
            {% endfor %}
          </nav>
          {% endif %}
          <p class="mc-price">
            <span class="mc-price-name">PRICE: </span> <span class="mc-price-value">${{ bali.retail }}</span>
          </p>
        </div>
      </div>

      <div class="mc-head-bottom-half">
        <p class="mc-status">
          <span class="mc-status-text">Status:</span>
          <span class="mc-status-value {{ b_status | replace: ' ', '-' }}">{{ bali.availability }}</span>
        </p>

        {% if b_status contains 'available' %}
        <p class="mc-ds">
          <span class="mc-ds-text">Drop schedule:</span>
          <span class="mc-ds-value">{{ bali.drop_schedule | default: '???' }}</span>
        </p>
        {% endif %}
      </div>
    </div>
  </header>

  <div class="mc-body">
    <!-- Row 1 -->
    <section class="mc-group">
      <div class="mc-item">
        <div class="value">{{ bali.production }}</div>
        <div class="hint">Production</div>
      </div>
      <div class="mc-item">
        <div class="value">{{ bali.amount_made | default: '-' }}</div>
        <div class="hint">Amount made (est.)</div>
      </div>
    </section>

    <!-- Row 2 -->
    <section class="mc-group">
      <div class="mc-item">
        <div class="value">{{ bali.pivot_system.type }}</div>
        <div class="hint">Pivot system</div>
      </div>
      <div class="mc-item">
        <div class="value">{{ bali.stop_system.type }}</div>
        <div class="hint">Stop system</div>
      </div>
    </section>
  </div>

  <!-- Bottom bar: weight + length on the right -->
  <footer class="mc-bottom">
    <p class="mc-bottom-right"> 
      <span class="mc-weight-text">WEIGHT: </span> 
      <span class="mc-weight-value">{{ bali.overall.weight | format_mass: 2, bali.units }}</span>
      Â·
      <span class="mc-length-text">LENGTH: </span> 
      <span class="mc-length-value">{{ bali.overall.length | format_mass: 2, bali.units }}</span>
    </p>
  </footer>
</div>
